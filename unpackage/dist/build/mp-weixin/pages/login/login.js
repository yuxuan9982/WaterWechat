"use strict";const e=require("../../common/vendor.js"),s={data:()=>({user:{userName:"",password:""},rules:{userName:[{required:!0,message:"用户名必填",trigger:"blur"}],password:[{required:!0,message:"密码必填",trigger:"blur"}]},test:[0],testList:[{value:0,text:"测试"}]}),onReady(){this.$refs.form.setRules(this.rules)},methods:{submit(){let s=this;if(this.test.length>0)return console.log("test"),this.$store.commit("login",{}),void e.index.switchTab({url:"/pages/MaintainTaskReceive/MaintainTaskReceive"});s.$ajax.postjson("/user/login",{loginName:s.user.userName,password:s.user.password}).then((e=>{if(e.success){console.log(e),sessionStorage.setItem("token",e.data.token),sessionStorage.setItem("departmentId",null!=e.data.departmentId?e.data.departmentId:-1);var s=e.data.user;s.authorities=e.data.authorities,console.log(s),this.$store.commit("login",s),console.log("登录成功·")}else console.log("登录失败，请检查用户名和密码!")}))}}};if(!Array){(e.resolveComponent("uni-easyinput")+e.resolveComponent("uni-forms-item")+e.resolveComponent("uni-forms")+e.resolveComponent("uni-data-checkbox"))()}Math||((()=>"../../uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.js")+(()=>"../../uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.js")+(()=>"../../uni_modules/uni-forms/components/uni-forms/uni-forms.js")+(()=>"../../uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox.js"))();const o=e._export_sfc(s,[["render",function(s,o,t,r,a,n){return{a:e.o((e=>a.user.userName=e)),b:e.p({placeholder:"请输入账号",modelValue:a.user.userName}),c:e.p({label:"账号",required:!0,name:"userName"}),d:e.o((e=>a.user.password=e)),e:e.p({type:"password",placeholder:"请输入密码",modelValue:a.user.password}),f:e.p({label:"密码",required:!0,name:"password"}),g:e.sr("form","41c0e31a-0"),h:e.p({modelValue:a.user}),i:e.o((e=>a.test=e)),j:e.p({multiple:!0,localdata:a.testList,modelValue:a.test}),k:e.o(((...e)=>n.submit&&n.submit(...e)))}}]]);wx.createPage(o);
