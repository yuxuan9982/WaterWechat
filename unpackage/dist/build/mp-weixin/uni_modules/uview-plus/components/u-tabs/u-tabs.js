"use strict";const e=require("../../../../common/vendor.js"),i=require("./props.js"),r=require("../../libs/mixin/mpMixin.js"),s=require("../../libs/mixin/mixin.js");require("../../libs/config/props.js"),require("../../libs/config/props/actionSheet.js"),require("../../libs/config/props/album.js"),require("../../libs/config/props/alert.js"),require("../../libs/config/props/avatar.js"),require("../../libs/config/props/avatarGroup.js"),require("../../libs/config/props/backtop.js"),require("../../libs/config/props/badge.js"),require("../../libs/config/props/button.js"),require("../../libs/config/props/calendar.js"),require("../../libs/config/props/carKeyboard.js"),require("../../libs/config/props/cell.js"),require("../../libs/config/props/cellGroup.js"),require("../../libs/config/props/checkbox.js"),require("../../libs/config/props/checkboxGroup.js"),require("../../libs/config/props/circleProgress.js"),require("../../libs/config/props/code.js"),require("../../libs/config/props/codeInput.js"),require("../../libs/config/props/col.js"),require("../../libs/config/props/collapse.js"),require("../../libs/config/props/collapseItem.js"),require("../../libs/config/props/columnNotice.js"),require("../../libs/config/props/countDown.js"),require("../../libs/config/props/countTo.js"),require("../../libs/config/props/datetimePicker.js"),require("../../libs/config/props/divider.js"),require("../../libs/config/props/empty.js"),require("../../libs/config/props/form.js"),require("../../libs/config/props/formItem.js"),require("../../libs/config/props/gap.js"),require("../../libs/config/props/grid.js"),require("../../libs/config/props/gridItem.js"),require("../../libs/config/props/icon.js"),require("../../libs/config/config.js"),require("../../libs/config/props/image.js"),require("../../libs/config/props/indexAnchor.js"),require("../../libs/config/props/indexList.js"),require("../../libs/config/props/input.js"),require("../../libs/config/props/keyboard.js"),require("../../libs/config/props/line.js"),require("../../libs/config/props/lineProgress.js"),require("../../libs/config/props/link.js"),require("../../libs/config/props/list.js"),require("../../libs/config/props/listItem.js"),require("../../libs/config/props/loadingIcon.js"),require("../../libs/config/props/loadingPage.js"),require("../../libs/config/props/loadmore.js"),require("../../libs/config/props/modal.js"),require("../../libs/config/props/navbar.js"),require("../../libs/config/color.js"),require("../../libs/config/props/noNetwork.js"),require("../../libs/config/props/noticeBar.js"),require("../../libs/config/props/notify.js"),require("../../libs/config/props/numberBox.js"),require("../../libs/config/props/numberKeyboard.js"),require("../../libs/config/props/overlay.js"),require("../../libs/config/props/parse.js"),require("../../libs/config/props/picker.js"),require("../../libs/config/props/popup.js"),require("../../libs/config/props/radio.js"),require("../../libs/config/props/radioGroup.js"),require("../../libs/config/props/rate.js"),require("../../libs/config/props/readMore.js"),require("../../libs/config/props/row.js"),require("../../libs/config/props/rowNotice.js"),require("../../libs/config/props/scrollList.js"),require("../../libs/config/props/search.js"),require("../../libs/config/props/section.js"),require("../../libs/config/props/skeleton.js"),require("../../libs/config/props/slider.js"),require("../../libs/config/props/statusBar.js"),require("../../libs/config/props/steps.js"),require("../../libs/config/props/stepsItem.js"),require("../../libs/config/props/sticky.js"),require("../../libs/config/props/subsection.js"),require("../../libs/config/props/swipeAction.js"),require("../../libs/config/props/swipeActionItem.js"),require("../../libs/config/props/swiper.js"),require("../../libs/config/props/swipterIndicator.js"),require("../../libs/config/props/switch.js"),require("../../libs/config/props/tabbar.js"),require("../../libs/config/props/tabbarItem.js"),require("../../libs/config/props/tabs.js"),require("../../libs/config/props/tag.js"),require("../../libs/config/props/text.js"),require("../../libs/config/props/textarea.js"),require("../../libs/config/props/toast.js"),require("../../libs/config/props/toolbar.js"),require("../../libs/config/props/tooltip.js"),require("../../libs/config/props/transition.js"),require("../../libs/config/props/upload.js");const o={name:"u-tabs",mixins:[r.mpMixin,s.mixin,i.props],data:()=>({firstTime:!0,scrollLeft:0,scrollViewWidth:0,lineOffsetLeft:0,tabsRect:{left:0},innerCurrent:0,moving:!1}),watch:{current:{immediate:!0,handler(e,i){e!==this.innerCurrent&&(this.innerCurrent=e,this.$nextTick((()=>{this.resize()})))}},list(){this.$nextTick((()=>{this.resize()}))}},computed:{textStyle(){return i=>{const r={},s=i===this.innerCurrent?e.index.$u.addStyle(this.activeStyle):e.index.$u.addStyle(this.inactiveStyle);return this.list[i].disabled&&(r.color="#c8c9cc"),e.index.$u.deepMerge(s,r)}},propsBadge:()=>e.index.$u.props.badge},async mounted(){this.init()},emits:["click","change"],methods:{setLineLeft(){const i=this.list[this.innerCurrent];if(!i)return;let r=this.list.slice(0,this.innerCurrent).reduce(((e,i)=>e+i.rect.width),0);const s=e.index.$u.getPx(this.lineWidth);this.lineOffsetLeft=r+(i.rect.width-s)/2,this.firstTime&&setTimeout((()=>{this.firstTime=!1}),10)},animation(e,i=0){},clickHandler(e,i){this.$emit("click",{...e,index:i}),e.disabled||(this.innerCurrent=i,this.resize(),this.$emit("change",{...e,index:i}))},init(){e.index.$u.sleep().then((()=>{this.resize()}))},setScrollLeft(){const i=this.list[this.innerCurrent],r=this.list.slice(0,this.innerCurrent).reduce(((e,i)=>e+i.rect.width),0),s=e.index.$u.sys().windowWidth;let o=r-(this.tabsRect.width-i.rect.width)/2-(s-this.tabsRect.right)/2+this.tabsRect.left/2;o=Math.min(o,this.scrollViewWidth-this.tabsRect.width),this.scrollLeft=Math.max(0,o)},resize(){0!==this.list.length&&Promise.all([this.getTabsRect(),this.getAllItemRect()]).then((([e,i=[]])=>{this.tabsRect=e,this.scrollViewWidth=0,i.map(((e,i)=>{this.scrollViewWidth+=e.width,this.list[i].rect=e})),this.setLineLeft(),this.setScrollLeft()}))},getTabsRect(){return new Promise((e=>{this.queryRect("u-tabs__wrapper__scroll-view").then((i=>e(i)))}))},getAllItemRect(){return new Promise((e=>{const i=this.list.map(((e,i)=>this.queryRect(`u-tabs__wrapper__nav__item-${i}`,!0)));Promise.all(i).then((i=>e(i)))}))},queryRect(e,i){return new Promise((i=>{this.$uGetRect(`.${e}`).then((e=>{i(e)}))}))}}};if(!Array){e.resolveComponent("u-badge")()}Math;const t=e._export_sfc(o,[["render",function(i,r,s,o,t,p){return{a:e.f(i.list,((r,s,o)=>({a:e.t(r[i.keyName]),b:e.n(r.disabled&&"u-tabs__wrapper__nav__item__text--disabled"),c:e.s(p.textStyle(s)),d:"5c753c99-0-"+o,e:e.p({show:!(!r.badge||!(r.badge.show||r.badge.isDot||r.badge.value)),isDot:r.badge&&r.badge.isDot||p.propsBadge.isDot,value:r.badge&&r.badge.value||p.propsBadge.value,max:r.badge&&r.badge.max||p.propsBadge.max,type:r.badge&&r.badge.type||p.propsBadge.type,showZero:r.badge&&r.badge.showZero||p.propsBadge.showZero,bgColor:r.badge&&r.badge.bgColor||p.propsBadge.bgColor,color:r.badge&&r.badge.color||p.propsBadge.color,shape:r.badge&&r.badge.shape||p.propsBadge.shape,numberType:r.badge&&r.badge.numberType||p.propsBadge.numberType,inverted:r.badge&&r.badge.inverted||p.propsBadge.inverted,customStyle:"margin-left: 4px;"}),f:s,g:e.o((e=>p.clickHandler(r,s)),s),h:`u-tabs__wrapper__nav__item-${s}`,i:e.n(`u-tabs__wrapper__nav__item-${s}`),j:e.n(r.disabled&&"u-tabs__wrapper__nav__item--disabled")}))),b:e.s(i.$u.addStyle(i.itemStyle)),c:e.s({flex:i.scrollable?"":1}),d:e.s({width:i.$u.addUnit(i.lineWidth),transform:`translate(${t.lineOffsetLeft}px)`,transitionDuration:`${t.firstTime?0:i.duration}ms`,height:i.$u.addUnit(i.lineHeight),background:i.lineColor,backgroundSize:i.lineBgSize}),e:i.scrollable,f:t.scrollLeft}}],["__scopeId","data-v-5c753c99"]]);wx.createComponent(t);
